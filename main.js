(()=>{"use strict";var e,t,n,r,o={26:(e,t,n)=>{n.a(e,(async(e,t)=>{try{var r=n(172),o=await r.R.getProfileId().then((function(e){return e})),c=document.querySelector(".places__list"),a=document.querySelector(".popup_type_edit"),i=document.querySelector(".popup_type_new-card"),u=document.querySelector(".popup_type_avatar"),s=document.querySelector(".popup_type_image"),p=s.querySelector(".popup__image"),l=s.querySelector(".popup__caption"),d=s.querySelector(".popup__close");a.classList.add("popup_is-animated"),i.classList.add("popup_is-animated"),s.classList.add("popup_is-animated");var _=function(e){var t=document.querySelector("#card-template").content.querySelector(".card").cloneNode(!0),n=t.querySelector(".card__image"),c=t.querySelector(".card__title"),a=t.querySelector(".card__like-button"),i=t.querySelector(".card__like-counter"),u=t.querySelector(".card__delete-button");return u.style.display="none",n.setAttribute("src",e.link),n.addEventListener("click",(function(){p.setAttribute("src",e.link),l.textContent=e.name,d.addEventListener("click",(function(){return x(s)})),P(s)})),e.likes.some((function(e){return e._id===o}))&&a.classList.add("card__like-button_is-active"),e.owner._id==o&&(u.style.display="inline-block",u.addEventListener("click",(function(t){t.target.closest(".card").remove(),r.R.deleteCard(e._id)}))),c.textContent=e.name,a.addEventListener("click",(function(t){t.target.classList.contains("card__like-button_is-active")?(i.textContent=Number(i.textContent)-1,r.R.delLike(e._id).then((function(e){return e.json()})).then((function(e){console.log(e),console.log(t.target.closest(".card")),t.target.closest(".card").parentNode.insertBefore(_(e),t.target.closest(".card"))})).then((function(e){return t.target.closest(".card").remove()}))):(i.textContent=Number(i.textContent)+1,r.R.putLike(e._id).then((function(e){return e.json()})).then((function(e){console.log(e),console.log(t.target.closest(".card")),t.target.closest(".card").parentNode.insertBefore(_(e),t.target.closest(".card"))})).then((function(e){return t.target.closest(".card").remove()}))),t.target.classList.toggle("card__like-button_is-active")})),i.textContent=e.likes.length,t};function P(e){e.classList.add("popup_is-opened"),document.addEventListener("keydown",(function(t){"Escape"==t.key&&x(e)})),e.addEventListener("click",(function(t){t.target===t.currentTarget&&x(e)}))}function x(e){e.classList.remove("popup_is-opened")}r.R.getInitialCards().then((function(e){for(var t=1;t<e.length;t++)c.append(_(e[t]))}));var f=a.querySelector(".popup__input_type_name"),v=a.querySelector(".popup__input_type_description"),h=[f,v],y=a.querySelector(".popup__button"),m=document.querySelector(".profile__title"),g=document.querySelector(".profile__description"),S=document.querySelector(".profile__image");r.R.getProfileData().then((function(e){m.textContent=e.name,g.textContent=e.about,S.style.backgroundImage="url(".concat(e.avatar,")")})),document.querySelector(".profile__edit-button").addEventListener("click",(function(e){f.value=m.textContent,v.value=g.textContent,P(a)}));var b=function(e,t,n){!function(e,t){t.some((function(e){return!e.validity.valid}))?(e.classList.add("inactive"),e.disabled=!0):(e.classList.remove("inactive"),e.disabled=!1)}(t,n),e.validity.valid?function(e){var t=document.querySelector(".popup__error_type_".concat(e.id));t.textContent="",t.classList.remove("popup__error_active"),e.classList.remove("popup__input_error")}(e,e.validationMessage):function(e,t){var n=document.querySelector(".popup__error_type_".concat(e.id));n.textContent=t,n.classList.add("popup__error_active"),e.classList.add("popup__input_error")}(e,e.validationMessage)};f.addEventListener("input",(function(e){return b(f,y,h)})),v.addEventListener("input",(function(e){return b(v,y,h)})),a.querySelector(".popup__close").addEventListener("click",(function(){return x(a)})),a.querySelector(".popup__form").addEventListener("submit",(function(e){e.preventDefault(),r.R.editProfile(f.value,v.value).then((function(e){return e.json()})).then((function(e){m.textContent=e.name,g.textContent=e.about,S.style.backgroundImage="url(".concat(e.avatar,")")})),x(a)}));var L=u.querySelector(".popup__input_type_avatar"),k=u.querySelector(".popup__button");L.addEventListener("input",(function(e){return b(L,k,[L])})),u.querySelector(".popup__close").addEventListener("click",(function(){return x(u)})),document.querySelector(".profile__edit-avatar-button").addEventListener("click",(function(e){L.value=null,P(u)})),u.querySelector(".popup__close").addEventListener("click",(function(){return x(u)})),u.querySelector(".popup__form").addEventListener("submit",(function(e){e.preventDefault(),r.R.editAvatar(L.value).then((function(e){return e.json()})).then((function(e){S.style.backgroundImage="url(".concat(e.avatar,")"),x(u)}))}));var q=i.querySelector(".popup__input_type_card-name"),E=i.querySelector(".popup__input_type_url"),C=[q,E],O=i.querySelector(".popup__button");q.addEventListener("input",(function(e){return b(q,O,C)})),E.addEventListener("input",(function(e){return b(E,O,C)})),a.querySelector(".popup__close").addEventListener("click",(function(){return x(a)})),document.querySelector(".profile__add-button").addEventListener("click",(function(e){q.value=null,E.value=null,P(i)})),i.querySelector(".popup__close").addEventListener("click",(function(){return x(i)})),i.querySelector(".popup__form").addEventListener("submit",(function(e){e.preventDefault(),r.R.addCard(q.value,E.value).then((function(e){return e.json()})).then((function(e){console.log(e),c.append(_(e))})),x(i)})),t()}catch(R){t(R)}}),1)},172:(e,t,n)=>{n.d(t,{R:()=>r});var r={TOKEN:"24d0f0da-0f69-4734-b57c-665ae9266079",GROUPID:"apf-cohort-202",getProfileData:function(){return fetch("https://nomoreparties.co/v1/".concat(this.GROUPID,"/users/me"),{headers:{authorization:this.TOKEN}}).then((function(e){return e.json()}))},getProfileId:function(){return this.getProfileData().then((function(e){return e._id}))},getInitialCards:function(){return fetch("https://nomoreparties.co/v1/".concat(this.GROUPID,"/cards"),{headers:{authorization:this.TOKEN}}).then((function(e){return e.json()}))},editProfile:function(e,t){return fetch("https://nomoreparties.co/v1/".concat(this.GROUPID,"/users/me"),{method:"PATCH",headers:{authorization:this.TOKEN,"Content-Type":"application/json"},body:JSON.stringify({name:e,about:t})}).catch((function(e){return console.log(e)}))},editAvatar:function(e){return fetch("https://nomoreparties.co/v1/".concat(this.GROUPID,"/users/me/avatar "),{method:"PATCH",headers:{authorization:this.TOKEN,"Content-Type":"application/json"},body:JSON.stringify({avatar:e})}).catch((function(e){return console.log(e)}))},addCard:function(e,t){return fetch("https://nomoreparties.co/v1/".concat(this.GROUPID,"/cards"),{method:"POST",headers:{authorization:this.TOKEN,"Content-Type":"application/json"},body:JSON.stringify({name:e,link:t})}).catch((function(e){return console.log(e)}))},deleteCard:function(e){return fetch("https://nomoreparties.co/v1/".concat(this.GROUPID,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this.TOKEN}}).catch((function(e){return console.log(e)}))},putLike:function(e){return fetch("https://nomoreparties.co/v1/".concat(this.GROUPID,"/cards/likes/").concat(e),{method:"PUT",headers:{authorization:this.TOKEN}}).catch((function(e){return console.log(e)}))},delLike:function(e){return fetch("https://nomoreparties.co/v1/".concat(this.GROUPID,"/cards/likes/").concat(e),{method:"DELETE",headers:{authorization:this.TOKEN}}).catch((function(e){return console.log(e)}))}}}},c={};function a(e){var t=c[e];if(void 0!==t)return t.exports;var n=c[e]={exports:{}};return o[e](n,n.exports,a),n.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",r=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},a.a=(o,c,a)=>{var i;a&&((i=[]).d=-1);var u,s,p,l=new Set,d=o.exports,_=new Promise(((e,t)=>{p=t,s=e}));_[t]=d,_[e]=e=>(i&&e(i),l.forEach(e),_.catch((e=>{}))),o.exports=_,c((o=>{var c;u=(o=>o.map((o=>{if(null!==o&&"object"==typeof o){if(o[e])return o;if(o.then){var c=[];c.d=0,o.then((e=>{a[t]=e,r(c)}),(e=>{a[n]=e,r(c)}));var a={};return a[e]=e=>e(c),a}}var i={};return i[e]=e=>{},i[t]=o,i})))(o);var a=()=>u.map((e=>{if(e[n])throw e[n];return e[t]})),s=new Promise((t=>{(c=()=>t(a)).r=0;var n=e=>e!==i&&!l.has(e)&&(l.add(e),e&&!e.d&&(c.r++,e.push(c)));u.map((t=>t[e](n)))}));return c.r?s:a()}),(e=>(e?p(_[n]=e):s(d),r(i)))),i&&i.d<0&&(i.d=0)},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a(26)})();